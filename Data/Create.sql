CREATE DATABASE IF NOT EXISTS STOCKDB  DEFAULT CHARSET utf8 COLLATE utf8_general_ci;


DROP TABLE STOCK_ALL;

CREATE TABLE STOCK_ALL
(
    STATE_DT VARCHAR(30),
    STOCK_CODE VARCHAR(20),
    OPEN FLOAT,
    CLOSE FLOAT,
    HIGH FLOAT,
    LOW FLOAT,
    VOL INT,
    AMOUNT FLOAT,
    PRE_CLOSE FLOAT,
    AMT_CHANGE FLOAT,
    PCT_CHANGE FLOAT,
    ADJUST INT
);

CREATE UNIQUE INDEX STOCK_ALL_IDX ON STOCK_ALL(STATE_DT, STOCK_CODE);

SELECT
    STOCK_CODE,
    MAX(STATE_DT)
FROM
    STOCK_ALL
GROUP BY
    STOCK_CODE;


DROP TABLE STOCK_REPORT_LIU_TREND;
CREATE TABLE STOCK_REPORT_LIU_TREND
(
    ANALYZE_DT VARCHAR(30),
    STOCK_CODE VARCHAR(20),
    TREND VARCHAR(20),
    ANALYZE_DAYS INT
);

DROP TABLE STOCK_REPORT_LIU_BOTTOM;
CREATE TABLE STOCK_REPORT_LIU_BOTTOM
(
    ANALYZE_DT VARCHAR(30),
    STOCK_CODE VARCHAR(20),
    DAYS INT,
    ANALYZE_DAYS INT,
    OFFSET FLOAT,
    RATIO FLOAT
);


DROP TABLE STOCK_INFO;
CREATE TABLE STOCK_INFO
(
    STOCK_CODE VARCHAR(20),
    NAME VARCHAR(100),
    INDUSTRY VARCHAR(100),
    AREA VARCHAR(20),
    PE FLOAT,
    OUTSTANDING FLOAT,
    TOTALS FLOAT,
    TOTALASSETS FLOAT,
    LIQUIDASSETS FLOAT,
    FIXEDASSETS FLOAT,
    RESERVED FLOAT,
    RESERVEDPERSHARE FLOAT,
    ESP FLOAT,
    BVPS FLOAT,
    PB FLOAT,
    TIMETOMARKET FLOAT,
    UNDP FLOAT,
    PERUNDP FLOAT,
    REV FLOAT,
    PROFIT FLOAT,
    GPR FLOAT,
    NPR FLOAT,
    HOLDERS FLOAT
);